# Инструкция по настройке Docker для проекта ruki-v-dom

## Быстрый запуск

Самый простой способ запустить проект:

```bash
# Запуск с помощью скрипта автоматизации
./docker-run.sh
```

Скрипт автоматически создаст файл `.env` (если он отсутствует), выполнит сборку и запустит контейнер.

## Подготовка переменных окружения

1. Создайте файл `.env` в корне проекта со следующими переменными:

```
TELEGRAM_BOT_RESUME_TOKEN=your_resume_token_here
TELEGRAM_BOT_ORDER_TOKEN=your_order_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
```

Замените значения на реальные токены и ID чата.

## Запуск с помощью docker-compose

```bash
# Очистка предыдущей сборки (если нужно)
docker-compose down
docker system prune -f

# Сборка и запуск контейнера
docker-compose up -d --build

# Просмотр логов
docker-compose logs -f

# Остановка контейнера
docker-compose down
```

## Устранение неполадок

1. Запустите диагностический скрипт:

```bash
./docker-debug.sh
```

2. Запустите контейнер в интерактивном режиме:

```bash
docker-compose run --rm app sh
```

3. Проверьте наличие всех файлов внутри контейнера:

```bash
# Внутри контейнера выполните:
ls -la
cat package.json | grep scripts
```

4. Если сборка Next.js завершается с ошибкой, попробуйте запустить сборку с отладкой:

```bash
# В контейнере:
NODE_OPTIONS=--inspect npm run build
```

## Важные замечания

1. В production окружении всегда используйте реальные значения переменных
2. Не загружайте файл `.env` в репозиторий
3. Приложение доступно на порту 3000 после запуска
4. При проблемах используйте упрощенный Dockerfile (однофазная сборка)
